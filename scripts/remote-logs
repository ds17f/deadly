#!/bin/bash

# remote-logs - Simple remote logging for KMM development
# Usage: remote-logs [android|ios] [concept]

set -euo pipefail

# Get script directory and source shared config
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
source "$SCRIPT_DIR/remote-config.sh"

# Default values
PLATFORM=""
CONCEPT="all"

# Parse arguments
if [ $# -eq 0 ]; then
    echo "Usage: remote-logs [android|ios] [concept]"
    echo ""
    echo "Examples:"
    echo "  remote-logs android data"
    echo "  remote-logs ios crash"
    echo "  remote-logs android search"
    exit 1
fi

PLATFORM="$1"
if [ $# -gt 1 ]; then
    CONCEPT="$2"
fi

# Validate platform
if [ "$PLATFORM" != "android" ] && [ "$PLATFORM" != "ios" ]; then
    echo "Error: Platform must be 'android' or 'ios'"
    exit 1
fi

# Sync code to remote
sync_to_remote

echo "ðŸ“± Running remote $PLATFORM logs for concept: $CONCEPT"
exec_remote "make logs-follow-$PLATFORM CONCEPT=$CONCEPT"